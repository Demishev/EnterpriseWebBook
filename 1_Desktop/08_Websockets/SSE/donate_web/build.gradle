apply plugin:'groovy'
apply plugin:'idea'
apply plugin: 'war'

// bundled in glassfish4 b 61
def jerseyVersion = '2.0-m09'

repositories {
    mavenCentral()
    maven{
        name "Eclipse"
        url "http://download.eclipse.org/rt/eclipselink/maven.repo"
    }
}

dependencies {
    groovy      'org.codehaus.groovy:groovy-all:2.0.5'

    providedCompile "org.glassfish.jersey.core:jersey-server:${jerseyVersion}"
    providedCompile "org.glassfish.jersey.media:jersey-media-moxy:${jerseyVersion}"
    providedCompile "org.glassfish.jersey.media:jersey-media-sse:${jerseyVersion}"
}

task wrap(type: Wrapper) {
    gradleVersion = '1.2'
}

task makeDirs(description:'make all dirs for project setup') << {
    def sources = [sourceSets.main, sourceSets.test]
    sources*.allSource*.srcDirs.flatten().each { File srcDir ->
        println "making $srcDir"
        srcDir.mkdirs()
    }
}